<div class="container">
    <div class="row">
        <div class = "col-6">
            <h4>Propiedades</h4>
        </div>
        <div class="col-6 text-end">
            <button class="btn btn-outline-success" (click)="openModel()">AÃ±adir nuevo</button>
        </div>
    </div>
    @if (propiedadList.length !==0) {
        <div class = "row">
            @for (item of propiedadList; track $index) {
                <div class="col-3">
                    <div class="card">
                    <div class="card-header"> 
                        <div class="row">
                            <div class="col-6"> 
                                {{item.name}}
                            </div>
                            <div class="col-6 text-end">
                                {{item.movilNo}}
                            </div>
                        </div>
                    </div>
                    <div class="card-body">
                        <p>{{item.city}}, {{item.state}},{{item.pincode}} </p>
                        <p>{{item.adress}} </p>
                    </div>
                    <div class="card-footer text-center">
                        <div class="row">
                            <div class="col-6">
                               <small> {{item.email}}</small>
                            </div>
                            <div class="col-6">
                                <button class="btn btn-sm btn-primary" (click)="onEdit(item)" >Editar</button>
                                <button class="btn btn-sm btn-danger" (click)="onDelete(item)" >Eliminar</button>
                            </div>
                        </div>
                    </div>
                    </div>
                </div>
    
            }
            <div class="col-3">
                <div class="card">
                <div class="card-header"> 
                    <div class="row">
                        <div class="col-6">
                            Nombre
                        </div>
                        <div class="col-6 text-end">
                            Numero de telefono
                        </div>
                    </div>
                </div>
                <div class="card-body">
                    <p>Ciudad, departamento, codigo postal</p>
                    <p>Direccion</p>
                </div>
                <div class="card-footer text-center">
                    <p>Email</p>
                </div>
                </div>
            </div>
        </div>

    } @else {
        <div class="row">
            <div class="col-12 p-4 text-center">
                <p>No hay propiedades. Crea una nueva. </p>
            </div>
        </div>
    }

</div>

<div class="modal" id="myModal" #myModal>
    <div class="modal-dialog">
        <div class="modal-content">

            <div class="modal-header">
                <h4 class="modal-title">Crear nueva propiedad</h4>
                <button type="button" class="btn-close" (click)="closeModel()"></button>
            </div>

            <div class="modal-body">
                <div class="row">
                    <div class="col-6">
                        <label for="">Nombre</label>
                        <input type="text" [(ngModel)] ="propiedadObj.name" class="form-control-sm" placeholder="Nombre">
                    </div>
                </div>
                <div class="row">
                    <div class="col-6">
                        <label for="">Numero de telefono</label>
                        <input type="text" [(ngModel)] ="propiedadObj.movilNo" class="form-control-sm" placeholder="Mobile">
                    </div>
                    <div class="col-6">
                        <label for="">Email</label>
                        <input type="text" [(ngModel)] ="propiedadObj.email" class="form-control-sm" placeholder="Email">
                    </div>
                </div>
                <div class="row">
                    <div class="col-6">
                        <label for="">Ciudad</label>
                        <input type="text" [(ngModel)] ="propiedadObj.city" class="form-control-sm" placeholder="City">
                    </div>
                    <div class="col-6">
                        <label for="">Departamento</label>
                        <input type="text" [(ngModel)] ="propiedadObj.state" class="form-control-sm" placeholder="State">
                    </div>
                    <div class="col-6">
                        <label for="">Codigo Postal</label>
                        <input type="text" [(ngModel)] ="propiedadObj.pincode" class="form-control-sm" placeholder="PinCode">
                    </div>
                </div>
                <div class="row">
                    <div class="col-6">
                        <label for="">Direccion</label>
                        <textarea rows="3" [(ngModel)] ="propiedadObj.adress" class="form-control-sm"></textarea>
                    </div>
                </div>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger"  (click)="closeModel()">Cerrar</button>
                @if(propiedadObj.id == 0){
                    <button type="button" class="btn btn-primary"  (click)="saveModel()">Guardar</button>
                } @else {
                    <button type="button" class="btn btn-outline-success"  (click)="updateModel()">Actualizar</button>
                }
            </div>
        </div>
    </div>
</div>
